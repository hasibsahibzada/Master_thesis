% Chapte 7
\chapter{Advertisement application} % Main chapter title

\label{Chapter7} % For referencing the chapter elsewhere, use \ref{Chapter1} 

\section{Introduction}
The use of technology in advertisement plays a major role in advertisement industries, it would have been much difficult to reach to their customers without technologies, and technology enhances the two-way communication much with client and customers. The companies can now easily express their thoughts and vision to their customers with the use new technologies. Advertisement are everywhere like in websites, in your smartphone, in Television and radio and especially from past decade it is more common on the streets, supermarkets, airports and areas where is crowded, So for every context or setting there are set of technologies that are being used to make the advertisement more appropriate, and when it comes to interactive advertisement the use of right technology plays another major role in terms of usability and understandability, Interactive advertisement in websites are usually interactive using keyboard and mouse, in smartphone is using the capability of the touch or other sensors to make the interaction easy and at the same time funny, and interactive advertisement in public space has again another bunch of technologies that could make the interaction usable like using face recognition, body and position recognition, hand gesture recognition and also touch sensors, proximity sensors and much more.

This chapter explains all the technical aspects of advertisement system that were developed during the thesis work. This chapter discusses what technologies and hardware have been used and what algorithm and methods have been implemented to accomplish the goals. This chapter explains the software for three main parts, attracting attention application, main advertisement application and the enhanced advertisement application.


\section{Attracting attention Application}
The goal of attraction attention was to develop systems that could attract the attention of the passers-by, in which three different applications were developed and later compared.

\subsection{Requirement gathering}
The bellow are the required elements used for the applications.


\subsubsection{Hardware requirement}

\begin{itemize}
\item \textbf{Microsoft Kinect Camera} \cite{Kinect} \\
This is one of the most used camera in public context a lot, this camera can track up to seven user's position (X, Y, Z) in real time; it is capable of recognizing hand gesture and even can track facial movements. The camera does not work well when it is exposed in sunlight, which makes it ideal for indoor use only. In our experiment Microsoft Xbox 360 Kinect camera was used, The Kinect camera should be used with an extra adapter in order to connect it to computer. 
\item \textbf{Computer} \\
A normal laptop was used with Core i7 2.7 Ghz processor, and 4 GB RAM and USB of 2.0 version.
If you want to use Xbox Kinect One Kinect then the computer should support USB version 3.0.
The laptop was connected to the University monitor via mini display port.

\end{itemize}


\subsubsection{Software requirement}
The software can run in any operating system except because of the processing programming language. In experiment mac OSX operating system was used with bellow library and processing version.
\begin{itemize}
\item Processing v2.2.2 or higher version.
\item SimpleOpenNI library for Processing \cite{simpleopenni}
\item 32bit JRE (Java Runtime Environment) v1.8 or higher.
\end{itemize}


\subsection{Following eye application}
The name is given \emph{Following eye} because the application shows eyes for each individual when pass from the front of the screen and those eyes follow the person where they walk. The interaction works with the Kinect camera that provides each individual positions.
Explore the attached CD for the source code.

\subsection{Firework application}
This application also uses kinect camera to track user position and renders a firework animation for each person.
The fireworks are created with using random number of circls (balls) with random colors and sizes, the circles burst from the person's location and spreads to random directions with a high speed and slows down at the end. One part of the application's code is freely taken from openprocessing community that could generate random firework bubbles.
For more detail please check the CD for source code.

\subsection{Silhouette application}
This application uses Kinect camera to produce colored silhouette of passers-by, the camera has a resolution of 640x480 pixels and the application requests UserMap from Kinect camera, userMap is a 1xD integer array from that corresponds to the pixels of the Kinect image, which normally looks like bellow. \\

\emph {Int upix = context.userMap();}

\emph{upix = [1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,-1,-1,-1,-1,-1,-1,2,2,2,2,....]}

The above example shows the structure of the array, the index of the elements of array correspond to the pixel number of image and the element values correspond to the user id standing in front of the camera, the user id is always above zero, any value which is not above zero in fact could be background or non-user pixel, the example shows that there are at least two people standing in front of the camera, which has user id (1 and 2) the -1 value is a non-user pixels. 
So the application iterates to this array and assigns specific color to each of the pixels of the user image and does not give color to the non-user pixels. 


% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
% Please add the following required packages to your document preamble:
% \usepackage[table,xcdraw]{xcolor}
% If you use beamer only pass "xcolor=table" option, i.e. \documentclass[xcolor=table]{beamer}
\begin{table}[H]
\centering
\caption{UserMap and application color mapping}
\label{usermap_colormapping}
\resizebox{\textwidth}{!}{ 
\begin{tabular}{ccccccccccccccccccccccccccccccccccccccccc}
-1 & -1 & -1                        & -1                        &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &    &    &    &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &  &  &  \\
-1 & -1 & -1                        &                           & -1                        &                           & -1                        & -1                        & -1                        &                           & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        &                           &                           &                           &    &    &    &                           &                           & -1                        &                           & -1                        &                           & -1                        & -1                        &                           &                           &                           &                           &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           & -1                        &                           &                           &                           &                           &                           &                           &                           & -1 &    &    & -1                        & -1                        & -1                        & -1                        &                           & \cellcolor[HTML]{FE0000}2 & -1                        & -1                        & -1                        &                           &                           &                           &  &  &  \\
-1 & -1 & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        &                           &                           &                           &                           & -1                        &                           &                           &                           &                           &    &    &    & \cellcolor[HTML]{FE0000}2 & -1                        & -1                        &                           & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & -1                        & -1                        & \cellcolor[HTML]{FE0000}2 &                           &                           &  &  &  \\
-1 & -1 & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        &                           &                           &                           &                           &                           &                           &                           &    &    &    &                           & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 &                           &                           & -1                        &  &  &  \\
-1 & -1 & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        &                           &                           &                           &                           & -1                        &                           &                           &                           &    &    &    &                           & -1                        & -1                        & -1                        & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 &                           & -1                        & -1                        & -1                        &                           &                           &  &  &  \\
-1 & -1 & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        &                           &                           & -1                        &                           & -1                        &                           &                           & -1                        &                           &                           &                           &                           & -1                        &                           &                           &    &    &    &                           &                           &                           &                           & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 &                           &                           &                           & -1                        &                           &                           &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           & -1                        & -1                        &                           &                           &                           &                           &    &    &    &                           &                           &                           & \cellcolor[HTML]{FE0000}  & -1                        & -1                        & \cellcolor[HTML]{FE0000}2 &                           &                           &                           &                           & -1                        &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           & -1                        & -1                        &                           &                           &                           &                           &    &    &    &                           &                           & \cellcolor[HTML]{FE0000}2 & -1                        & -1                        & -1                        & -1                        & \cellcolor[HTML]{FE0000}2 &                           &                           &                           &                           &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & -1                        &                           &                           & -1                        & -1                        &                           &                           &                           &                           &    &    &    &                           & \cellcolor[HTML]{FE0000}2 & \cellcolor[HTML]{FE0000}2 &                           & -1                        & -1                        &                           &                           & \cellcolor[HTML]{FE0000}2 &                           &                           &                           &  &  &  \\
   &    & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & -1                        &                           & -1                        & -1                        & -1                        &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &    &    &    &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &  &  &  \\
   &    &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & -1                        & -1                        & -1                        &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & -1                        &                           & -1 & -1 & -1 &                           &                           &                           & -1                        &                           & -1                        & -1                        &                           & -1                        &                           & -1                        &                           &  &  &  \\
   &    &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &    &    &    &                           & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        & -1                        &  &  &  \\
   &    & -1                        &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           & -1                        &    &    &    &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &                           &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           & -1                        &                           & -1                        &                           &                           & -1                        & -1 & -1 &    & \cellcolor[HTML]{329A9D}1 &                           &                           &                           &                           & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 &                           &                           &                           &                           & \cellcolor[HTML]{329A9D}1 &  &  &  \\
   & -1 &                           &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           & -1                        &    &    &    & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 &                           &  &  &  \\
   &    &                           &                           &                           &                           & -1                        &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & -1                        & -1                        & -1                        & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           & -1                        &    & -1 &    &                           & -1                        &                           & -1                        & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 &                           &                           &                           &                           &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & -1                        & -1                        & -1                        & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           & -1                        &    &    &    &                           &                           &                           &                           & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 & \cellcolor[HTML]{329A9D}1 &                           &                           &                           & -1                        &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & -1                        & -1                        & -1                        & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           & -1                        &    &    &    & -1                        & -1                        &                           &                           & \cellcolor[HTML]{329A9D}1 & -1                        & -1                        & \cellcolor[HTML]{329A9D}1 &                           &                           &                           &                           &  &  &  \\
   &    &                           &                           &                           &                           &                           &                           & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 & -1                        & -1                        & -1                        & \cellcolor[HTML]{3531FF}3 & \cellcolor[HTML]{3531FF}3 &                           &                           &                           &                           &                           &                           &                           &    &    &    &                           &                           &                           &                           & \cellcolor[HTML]{329A9D}1 & -1                        & -1                        & \cellcolor[HTML]{329A9D}1 &                           &                           &                           &                           &  &  & 
\end{tabular}
}
\end{table}

As you can see from above picture, the white areas or the -1 values are background and non-user and the remaining positive number represent the pixelse related to the user.
For more information about the source codes, please refer to the CD.


\section{Main advertisement application}
In this section the main advertisement applications are being discussed.
According to the plane there was a need to develop three-advertisement application (non-interactive, body interactive and mobile interactive), which at one sense had the same functionality but are different in terms of interactivity and control.


\subsection{Non-Interactive}
As can be understood the application is not influenced by the passers-by but triggers automatically, it automate through whole three phases (Initial screen, Map screen and video screen) and at the same time record depth image frames using Kinect Camera.





\section{Enhanced advertisement application}


\section{Requirement gathering}

